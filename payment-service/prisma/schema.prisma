generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Payment {
  id               String        @id @default(uuid())
  bookingId        String
  paymentDate      DateTime      @default(now())
  amount           Decimal
  orderIdGateway   String        @unique //this will be the orderId generated by booking service that is passed to gateway for payment,here using a temp one.ASSUMPTION: this and the orderId by paymentGateway sent as response will be same.
  status           PaymentStatus
  method           String? //by payment gateway
  transactionId    String? //by payment gateway, this will also be unique
  gatewaySignature String? //by payment gateway
  gatewayOrderId   String? //by payment gateway, this will also be unique
  payerEmail       String? //by payment gateway
  payerName        String? //by payment gateway
  payerId          String? //by payment gateway

  @@index([bookingId])
  @@index([orderIdGateway])
}

enum PaymentStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}
